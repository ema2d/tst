<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø³Ø¬Ø¯Ù†Ø§</title>
<style>
body { font-family: Tahoma, Arial, sans-serif; margin:0; padding:0; background:#f9fafb; }
header { background:#1e40af; color:white; padding:15px; text-align:center; font-size:20px; font-weight:bold; }
main { padding:20px; text-align:center; }
button { background:#1e40af; color:#fff; border:none; padding:12px 20px; border-radius:12px; font-size:16px; cursor:pointer; margin:10px 0; }
.grid { display:grid; grid-template-columns:repeat(2,1fr); gap:15px; }
.card { background:#e0f2fe; color:#1e40af; border-radius:15px; padding:25px 10px; font-size:16px; font-weight:bold; box-shadow:0 4px 6px rgba(0,0,0,0.1); cursor:pointer; }
.popup { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center; z-index:1000; }
.popup-content { background:#fff; border-radius:20px; padding:20px; width:90%; max-width:420px; text-align:right; box-shadow:0 6px 12px rgba(0,0,0,0.2); }
label { font-weight:bold; display:block; margin-top:10px; margin-bottom:5px; }
select,input[type="text"],textarea,input[type="file"],input[type="number"] { width:100%; margin-bottom:10px; padding:8px; border-radius:8px; border:1px solid #ccc; font-size:14px; }
textarea { height:80px; resize:none; }
.actions { display:flex; justify-content:space-between; margin-top:10px; }
.cancel { background:#d1d5db; }
.send { background:#1e40af; color:#fff; }
.report-card { background:#fff; padding:15px; margin:10px; border-radius:12px; box-shadow:0 2px 4px rgba(0,0,0,0.1); text-align:right; }
.nav { display:flex; justify-content:space-around; background:#e5e7eb; padding:10px; position:fixed; bottom:0; left:0; width:100%; }
.nav button { background:none; color:#1e40af; font-weight:bold; font-size:16px; }
img.report-img { max-width:100%; border-radius:8px; margin-top:5px; }
</style>
</head>
<body>

<header>Ù…Ø³Ø¬Ø¯Ù†Ø§</header>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<main id="homePage">
  <button onclick="showServices()">â• Ø¨Ù„Ø§Øº Ø¬Ø¯ÙŠØ¯</button>
  <button onclick="showProviderPage()">ğŸ‘· ØµÙØ­Ø© Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
  <button onclick="showReportsPage()">ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©</button>
</main>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ù„Ù…ØµÙ„ÙŠ -->
<div class="popup" id="servicePopup">
  <div class="popup-content">
    <h2>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©</h2>
    <div class="grid">
      <div class="card" onclick="openReportPopup('Ø§Ù„ØµÙŠØ§Ù†Ø©',['ÙƒÙ‡Ø±Ø¨Ø§Ø¡','Ø³Ø¨Ø§ÙƒØ©','ØªÙƒÙŠÙŠÙ','Ø¥Ù†Ø§Ø±Ø©'])">ğŸ› ï¸ Ø§Ù„ØµÙŠØ§Ù†Ø©</div>
      <div class="card" onclick="openReportPopup('Ø§Ù„Ù†Ø¸Ø§ÙØ©',['ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³Ø¬Ø¯','Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…ÙŠØ§Ù‡','Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§ÙØ©'])">ğŸ§¹ Ø§Ù„Ù†Ø¸Ø§ÙØ©</div>
      <div class="card" onclick="openReportPopup('Ø§Ù„ØªØ¬Ù‡ÙŠØ²Ø§Øª',['Ù…ÙŠØ§Ù‡','ØªÙ…Ø±','Ù…ØµØ§Ø­Ù','Ø³Ø¬Ø§Ø¯','Ù…Ù†Ø§Ø¯ÙŠÙ„','Ù…Ø¹Ø·Ø±Ø§Øª','Ù…Ù†Ø¸ÙØ§Øª'])">ğŸ“¦ Ø§Ù„ØªØ¬Ù‡ÙŠØ²Ø§Øª</div>
      <div class="card" onclick="openReportPopup('Ø£Ø®Ø±Ù‰',[])">âœï¸ Ø£Ø®Ø±Ù‰</div>
    </div>
    <div style="margin-top:15px; text-align:center;">
      <button class="cancel" onclick="closeServices()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>
</div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¨Ù„Ø§Øº -->
<div class="popup" id="reportPopup">
  <div class="popup-content">
    <h2 id="serviceTitle"></h2>

    <div id="subServiceDiv" style="display:none;">
      <label>ğŸ”§ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</label>
      <select id="subService"></select>
    </div>

    <label>ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³Ø¬Ø¯:</label>
    <input type="text" id="mosqueLocation" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø³Ø¬Ø¯ Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ - Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©">

    <label>ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§Øº:</label>
    <textarea id="reportDetails" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§Øº..."></textarea>

    <label>ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¬Ø¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="text" id="contactInfo" placeholder="Ø§Ø³Ù… / Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„">

    <label>ğŸ“· Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© / ÙÙŠØ¯ÙŠÙˆ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="file" id="reportFile" multiple>

    <div class="actions">
      <button class="cancel" onclick="closePopup()">Ø¥Ù„ØºØ§Ø¡</button>
      <button class="send" onclick="sendReport()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº</button>
    </div>
  </div>
</div>

<!-- ØµÙØ­Ø© Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø© -->
<main id="providerPage" style="display:none;">
  <button onclick="showHome()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <h2>ğŸ‘· Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h2>
  <div id="providerReports"></div>
</main>

<!-- ØµÙØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø© -->
<main id="providerReportsPage" style="display:none;">
  <button onclick="showHome()">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <h2>ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©</h2>
  <div id="providerReportsList"></div>
</main>

<script>
let currentService="", subServices=[], reports=[], providerReports=[];

function showServices(){ document.getElementById("servicePopup").style.display="flex"; }
function closeServices(){ document.getElementById("servicePopup").style.display="none"; }

function openReportPopup(service, subs){
  currentService=service;
  subServices=subs;
  document.getElementById("serviceTitle").innerText="ğŸ•Œ "+service;
  let subDiv=document.getElementById("subServiceDiv");
  let subSelect=document.getElementById("subService");
  if(subs.length>0){ subSelect.innerHTML=""; subs.forEach(s=>{let opt=document.createElement("option"); opt.value=s; opt.innerText=s; subSelect.appendChild(opt); }); subDiv.style.display="block"; }
  else subDiv.style.display="none";
  closeServices();
  document.getElementById("reportPopup").style.display="flex";
}

function closePopup(){ document.getElementById("reportPopup").style.display="none"; }

function sendReport(){
  const location=document.getElementById("mosqueLocation").value;
  const details=document.getElementById("reportDetails").value;
  const contact=document.getElementById("contactInfo").value;
  const files=document.getElementById("reportFile").files;
  const subService=subServices.length>0?document.getElementById("subService").value:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";
  if(!location||!details){ alert("âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³Ø¬Ø¯ ÙˆØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§Øº"); return; }

  let newReport={service:currentService, sub:subService, location, details, contact, status:"Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©", amount:"", note:"", images:[]};
  for(let i=0;i<files.length;i++){
    newReport.images.push(URL.createObjectURL(files[i]));
  }
  reports.push(newReport);
  providerReports.push(newReport);
  alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº");
  closePopup();
  showHome();
}

// Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
function showHome(){
  document.getElementById("homePage").style.display="block";
  document.getElementById("providerPage").style.display="none";
  document.getElementById("providerReportsPage").style.display="none";
}

// ØµÙØ­Ø© Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©
function showProviderPage(){
  document.getElementById("homePage").style.display="none";
  document.getElementById("providerPage").style.display="block";
  document.getElementById("providerReportsPage").style.display="none";

  let list=document.getElementById("providerReports");
  list.innerHTML="";
  providerReports.forEach((r,i)=>{
    let card=document.createElement("div");
    card.className="report-card";
    let imagesHTML=r.images.map(img=>`<img class="report-img" src="${img}">`).join("");
    card.innerHTML=`
      <b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${r.service} (${r.sub})<br>
      <b>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b> ${r.location}<br>
      <b>Ø§Ù„ØªÙØ§ØµÙŠÙ„:</b> ${r.details}<br>
      <b>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</b> ${r.contact||"ØºÙŠØ± Ù…Ø¶Ø§Ù"}<br>
      <b>Ø§Ù„Ø­Ø§Ù„Ø©:</b> ${r.status}<br>
      ${imagesHTML}
      <label>ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</label>
      <input type="number" id="amount${i}" value="${r.amount}" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº">
      <label>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª / ØªÙ‚Ø±ÙŠØ±:</label>
      <textarea id="note${i}" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª">${r.note}</textarea>
      <button onclick="updateReport(${i})">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
    `;
    list.appendChild(card);
  });
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ù„Ø§Øº Ù…Ù† Ù‚Ø¨Ù„ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©
function updateReport(index){
  let amount=document.getElementById("amount"+index).value;
  let note=document.getElementById("note"+index).value;
  providerReports[index].amount=amount;
  providerReports[index].note=note;
  providerReports[index].status="ØªÙ… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©";
  alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ù„Ø§Øº");
  showProviderPage();
}

// ØµÙØ­Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø²ÙˆØ¯ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©
function showReportsPage(){
  document.getElementById("homePage").style.display="none";
  document.getElementById("providerPage").style.display="none";
  document.getElementById("providerReportsPage").style.display="block";

  let list=document.getElementById("providerReportsList");
  list.innerHTML="";
  providerReports.forEach((r)=>{
    if(r.status==="ØªÙ… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"){
      let card=document.createElement("div");
      card.className="report-card";
      let imagesHTML=r.images.map(img=>`<img class="report-img" src="${img}">`).join("");
      card.innerHTML=`
        <b>Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${r.service} (${r.sub})<br>
        <b>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b> ${r.location}<br>
        <b>Ø§Ù„ØªÙØ§ØµÙŠÙ„:</b> ${r.details}<br>
        <b>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</b> ${r.contact||"ØºÙŠØ± Ù…Ø¶Ø§Ù"}<br>
        <b>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</b> ${r.amount}<br>
        <b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©:</b> ${r.note}<br>
        ${imagesHTML}
      `;
      list.appendChild(card);
    }
  });
}

// Ø§ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
showHome();
</script>

</body>
</html>
